<header id="univ-header" class="univ-header">
  <img class="logo" src="./assets/docker.png" />
  <label> Bifr√∂st </label>
  <div class="flex-row server-header" fxLayoutAlign="space-between center" fxFlex="0 0 auto">
    <div class="flex-row action-button">
      <asi-button (click)="startContainers()"><i class="fas fa-play"></i><span>start</span></asi-button>
      <asi-button (click)="stopContainers()"><i class="fas fa-stop"></i><span>stop</span></asi-button>
      <asi-button (click)="updateContainers()"><i class="fas fa-download"></i><span>update</span></asi-button>
      <asi-button (click)="deleteContainers()"><i class="fas fa-trash"></i><span>delete</span></asi-button>
      <asi-button (click)="pruneDocker()"><i class="fas fa-snowplow"></i><span>prune images</span></asi-button>
    </div>
  
    <asi-checkbox label="Show only proxified : " labelPosition="left" [(ngModel)]="this.server.onlyActive"
      (onValueChange)="onShowOnlyActiveChanged()"></asi-checkbox>
    <asi-button (click)="updateProxyConf()">Update proxy</asi-button>
  </div>
</header>

<asi-table #containersTable [autoSort]="true" [selectionModel]="serverSelectionModel" [onRequestData]="refreshTable">
  <asi-table-column name="proxified" type="checkbox" columnClass="check-col"></asi-table-column>
  <asi-table-column name="state" libelle="" sortName="State" [sortable]="true">
    <asi-cell *asiCellDef="let container">
      <asi-fa-icon *ngIf="!container.loading" icon="fa fa-power-off" [ngClass]="container.State"></asi-fa-icon>
      <asi-fa-icon *ngIf="container.loading" icon="fa fa-spin fa-sync"></asi-fa-icon>
    </asi-cell>
  </asi-table-column>
  <asi-table-column name="name" libelle="Name" [sortable]="true">
    <asi-cell *asiCellDef="let container">
      <div class="flex-row col-center">
        <span>{{ container.name }}</span>
      </div>
    </asi-cell>
  </asi-table-column>
  <asi-table-column name="image" libelle="Image">
    <asi-cell *asiCellDef="let container">
      <div class="flex-row col-center">
        <span>{{container.imageName}}</span>
      </div>
    </asi-cell>
  </asi-table-column>
  <asi-table-column name="info" libelle="Info">
    <asi-cell *asiCellDef="let container">
      <asi-fa-icon icon="fa fa-info-circle" size="1x" [tooltip]="container.tooltip"></asi-fa-icon>
    </asi-cell>
  </asi-table-column>
  <asi-table-column name="port" libelle="Port" columnClass="port-col">
    <asi-cell *asiCellDef="let container">
      <!-- <ul> -->
      <span *ngFor="let port of container.Ports" [hidden]="!port.PublicPort">
        {{port.PrivatePort + ':' + port.PublicPort}}</span>
      <!-- </ul> -->
    </asi-cell>
  </asi-table-column>
  <asi-table-column name="proxy" libelle="Proxy - Path" columnClass="proxypath-col">
    <asi-cell *asiCellDef="let container">
      <asi-input [(ngModel)]="container.proxyPath"></asi-input>
    </asi-cell>
  </asi-table-column>
  <asi-table-column name="proxy" libelle="ProxyPass" columnClass="proxypass-col">
    <asi-cell *asiCellDef="let container">
      <asi-input [(ngModel)]="container.proxyPass"></asi-input>
    </asi-cell>
  </asi-table-column>
  <asi-table-column name="proxy" libelle="Tag" columnClass="tag-col">
    <asi-cell *asiCellDef="let container">
      <asi-input [(ngModel)]="container.tag"></asi-input>
    </asi-cell>
  </asi-table-column>
</asi-table>